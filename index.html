import React, { useState, useEffect, useRef } from 'react';
import { 
  Play, 
  Pause, 
  SkipForward, 
  Square, 
  Clock, 
  Settings, 
  RotateCcw, 
  Info,
  CheckCircle2,
  Timer,
  Zap,
  BrainCircuit,
  Lightbulb,
  Sparkles,
  Zap as ZapIcon, 
  Eye,
  Heart,
  Crown,
  MapPin,
  Quote,
  AlertTriangle,
  Loader2,
  Wand2
} from 'lucide-react';

// --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø API ---
const apiKey = ""; // API –∫–ª—é—á –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

const callGemini = async (prompt) => {
  try {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }]
        })
      }
    );
    const data = await response.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || null;
  } catch (error) {
    console.error("Gemini API Error:", error);
    return null;
  }
};

// --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò –î–ê–ù–ù–´–ï ---

// 1. –ö–ê–¢–ï–ì–û–†–ò–ò (–î–æ–±–∞–≤–ª–µ–Ω–∞ AI –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
const CATEGORIES = {
  ALL: { id: 'all', label: '–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' },
  AI_CUSTOM: { id: 'ai_custom', label: '‚ú® –°–≤–æ—è —Ç–µ–º–∞ (AI)', isAi: true },
  OBJECTS: { id: 'objects', label: '–ü—Ä–µ–¥–º–µ—Ç—ã –∏ –±—ã—Ç' },
  FOOD: { id: 'food', label: '–ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏' },
  NATURE: { id: 'nature', label: '–ü—Ä–∏—Ä–æ–¥–∞ –∏ –ø–æ–≥–æ–¥–∞' },
  PLACES: { id: 'places', label: '–ì–æ—Ä–æ–¥ –∏ –º–µ—Å—Ç–∞' },
  PEOPLE: { id: 'people', label: '–õ—é–¥–∏ –∏ —Ä–æ–ª–∏' },
  EMOTIONS: { id: 'emotions', label: '–≠–º–æ—Ü–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è' },
  ABSTRACT: { id: 'abstract', label: '–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ' },
  ACTIONS: { id: 'actions', label: '–î–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã' },
  COMMUNICATION: { id: 'communication', label: '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è' },
  TECH: { id: 'tech', label: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏' },
};

// 2. –†–ï–ñ–ò–ú–´ –ò–ì–†–´
const GAME_MODES = [
  { 
    id: 'classic', 
    label: '–ö–ª–∞—Å—Å–∏–∫–∞', 
    icon: BrainCircuit, 
    desc: '–õ—é–±—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏. –ü—Ä–æ—Å—Ç–æ –∏ —Å–≤–æ–±–æ–¥–Ω–æ.',
    isPro: false 
  },
  { 
    id: 'speed', 
    label: '–ù–∞ —Å–∫–æ—Ä–æ—Å—Ç—å', 
    icon: ZapIcon, 
    desc: '–ë–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫! –ü–∞—É–∑–∞ > 1 —Å–µ–∫ ‚Äî –∂–º–∏ –¥–∞–ª—å—à–µ.',
    isPro: false 
  },
  { 
    id: 'close', 
    label: '–ë–ª–∏–∑–∫–æ', 
    icon: Lightbulb, 
    desc: '–¢–æ–ª—å–∫–æ –æ—á–µ–≤–∏–¥–Ω—ã–µ –∏ –ø—Ä—è–º—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏.',
    isPro: false 
  },
  { 
    id: 'far', 
    label: '–î–∞–ª–µ–∫–æ', 
    icon: Sparkles, 
    desc: '–ò—â–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ, –¥–∞–ª—å–Ω–∏–µ —Å–≤—è–∑–∏.',
    isPro: true 
  },
  { 
    id: 'sensory', 
    label: '–°–µ–Ω—Å–æ—Ä–∏–∫–∞', 
    icon: Eye, 
    desc: '–í–∏–¥, —Ñ–∞–∫—Ç—É—Ä–∞, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –∑–≤—É–∫, –∑–∞–ø–∞—Ö, –≤–∫—É—Å.',
    isPro: true 
  },
  { 
    id: 'emotion', 
    label: '–≠–º–æ—Ü–∏—è', 
    icon: Heart, 
    desc: '–ö–∞–∫–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–æ–∂–¥–∞–µ—Ç —ç—Ç–æ —Å–ª–æ–≤–æ?',
    isPro: true 
  },
  { 
    id: 'status', 
    label: '–°—Ç–∞—Ç—É—Å', 
    icon: Crown, 
    desc: '–î–æ—Ä–æ–≥–æ/–¥—ë—à–µ–≤–æ, —ç–ª–∏—Ç–Ω–æ/–º–∞—Å—Å–æ–≤–æ, —Å—Ç–∏–ª—å.',
    isPro: true 
  },
  { 
    id: 'situation', 
    label: '–°–∏—Ç—É–∞—Ü–∏—è', 
    icon: MapPin, 
    desc: '–°—Ü–µ–Ω–∞: –≥–¥–µ, —Å –∫–µ–º –∏ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.',
    isPro: true 
  },
  { 
    id: 'metaphor', 
    label: '–ú–µ—Ç–∞—Ñ–æ—Ä–∞', 
    icon: Quote, 
    desc: '–§–æ—Ä–º–∞—Ç "–≠—Ç–æ –∫–∞–∫..."',
    isPro: true 
  },
  { 
    id: 'no_banal', 
    label: '–ë–µ–∑ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π', 
    icon: AlertTriangle, 
    desc: '–ò–∑–±–µ–≥–∞–π —Å–ª–æ–≤ "—Ö–æ—Ä–æ—à–æ", "–ø–ª–æ—Ö–æ", "–æ–±—ã—á–Ω–æ".',
    isPro: true 
  },
];

const DURATION_PRESETS = [60, 180, 300, 600, 900];
const INTERVAL_PRESETS = [3, 5, 7, 10, 15];

// 3. –ù–û–í–´–ô –°–õ–û–í–ê–†–¨ (240+ —Å–ª–æ–≤)
const createWords = (list, category) => list.split(', ').map(text => ({ text, category }));

const WORD_DB = [
  ...createWords("–°—Ç—É–ª, –°—Ç–æ–ª, –î–∏–≤–∞–Ω, –ö—Ä–æ–≤–∞—Ç—å, –®–∫–∞—Ñ, –ü–æ–ª–∫–∞, –ö–ª—é—á, –ó–∞–º–æ–∫, –î–≤–µ—Ä—å, –û–∫–Ω–æ, –õ–∞–º–ø–∞, –°–≤–µ—á–∞, –ó–µ—Ä–∫–∞–ª–æ, –ß–∞—Å—ã, –ö–∞–ª–µ–Ω–¥–∞—Ä—å, –¢–µ–ª–µ—Ñ–æ–Ω, –ù–∞—É—à–Ω–∏–∫–∏, –ö–æ–º–ø—å—é—Ç–µ—Ä, –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –ú—ã—à—å, –ó–∞—Ä—è–¥–∫–∞, –†—é–∫–∑–∞–∫, –°—É–º–∫–∞, –ö–æ—à–µ–ª—ë–∫, –ó–æ–Ω—Ç, –ë—É—Ç—ã–ª–∫–∞, –ö—Ä—É–∂–∫–∞, –¢–∞—Ä–µ–ª–∫–∞, –õ–æ–∂–∫–∞, –ù–æ–∂, –í–∏–ª–∫–∞, –ö–Ω–∏–≥–∞, –¢–µ—Ç—Ä–∞–¥—å, –†—É—á–∫–∞, –ù–∞–∫–ª–µ–π–∫–∞, –ü–ª–µ–¥, –ü–æ–¥—É—à–∫–∞, –ú—ã–ª–æ, –ü–æ–ª–æ—Ç–µ–Ω—Ü–µ, –û—á–∫–∏", 'objects'),
  ...createWords("–•–ª–µ–±, –ú–∞—Å–ª–æ, –°—ã—Ä, –ô–æ–≥—É—Ä—Ç, –Ø–π—Ü–æ, –ü–∞—Å—Ç–∞, –†–∏—Å, –°—É–ø, –°–∞–ª–∞—Ç, –ü–∏—Ü—Ü–∞, –®–æ–∫–æ–ª–∞–¥, –ü–µ—á–µ–Ω—å–µ, –ú—ë–¥, –Ø–±–ª–æ–∫–æ, –ë–∞–Ω–∞–Ω, –ê–ø–µ–ª—å—Å–∏–Ω, –õ–∏–º–æ–Ω, –ö–ª—É–±–Ω–∏–∫–∞, –û—Ä–µ—Ö–∏, –ß–∞–π, –ö–æ—Ñ–µ, –ö–∞–∫–∞–æ, –í–æ–¥–∞, –°–æ–∫", 'food'),
  ...createWords("–°–æ–ª–Ω—Ü–µ, –î–æ–∂–¥—å, –°–Ω–µ–≥, –í–µ—Ç–µ—Ä, –ì—Ä–æ–∑–∞, –¢—É–º–∞–Ω, –†–∞–¥—É–≥–∞, –ú–æ—Ä–µ, –†–µ–∫–∞, –û–∑–µ—Ä–æ, –ì–æ—Ä–∞, –õ–µ—Å, –ü–æ–ª–µ, –ü–µ—Å–æ–∫, –ö–∞–º–µ–Ω—å, –õ–∏—Å—Ç, –¶–≤–µ—Ç–æ–∫, –î–µ—Ä–µ–≤–æ, –û–≥–æ–Ω—å, –õ—ë–¥, –í–æ–ª–Ω–∞, –û–±–ª–∞–∫–æ, –ó–≤–µ–∑–¥–∞, –õ—É–Ω–∞", 'nature'),
  ...createWords("–î–æ–º, –ö–≤–∞—Ä—Ç–∏—Ä–∞, –ü–æ–¥—ä–µ–∑–¥, –õ–∏—Ñ—Ç, –î–≤–æ—Ä, –£–ª–∏—Ü–∞, –ü–ª–æ—â–∞–¥—å, –ü–∞—Ä–∫, –ö–∞—Ñ–µ, –†–µ—Å—Ç–æ—Ä–∞–Ω, –ú–∞–≥–∞–∑–∏–Ω, –†—ã–Ω–æ–∫, –û—Ñ–∏—Å, –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∫–∞, –ö–æ–≤–æ—Ä–∫–∏–Ω–≥, –®–∫–æ–ª–∞, –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –¢–µ–∞—Ç—Ä, –ö–∏–Ω–æ, –ú—É–∑–µ–π, –°—Ç–∞–¥–∏–æ–Ω, –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ë–æ–ª—å–Ω–∏—Ü–∞, –ê–ø—Ç–µ–∫–∞, –ú–µ—Ç—Ä–æ, –í–æ–∫–∑–∞–ª", 'places'),
  ...createWords("–î—Ä—É–≥, –ü–æ–¥—Ä—É–≥–∞, –ü–∞—Ä—Ç–Ω—ë—Ä, –†–æ–¥–∏—Ç–µ–ª—å, –†–µ–±—ë–Ω–æ–∫, –£—á–∏—Ç–µ–ª—å, –¢—Ä–µ–Ω–µ—Ä, –í–µ–¥—É—â–∏–π, –ó—Ä–∏—Ç–µ–ª—å, –ö–ª–∏–µ–Ω—Ç, –ú–µ–Ω–µ–¥–∂–µ—Ä, –î–∏—Ä–µ–∫—Ç–æ—Ä, –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å, –ö–æ–º–∞–Ω–¥–∞, –ö–æ–ª–ª–µ–≥–∞, –ù–æ–≤–∏—á–æ–∫, –≠–∫—Å–ø–µ—Ä—Ç, –ü—Å–∏—Ö–æ–ª–æ–≥, –í—Ä–∞—á, –ê–∫—Ç—ë—Ä, –ú—É–∑—ã–∫–∞–Ω—Ç, –•—É–¥–æ–∂–Ω–∏–∫, –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –î–∏–∑–∞–π–Ω–µ—Ä, –ë–ª–æ–≥–µ—Ä, –°–æ—Å–µ–¥", 'people'),
  ...createWords("–†–∞–¥–æ—Å—Ç—å, –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –¢—Ä–µ–≤–æ–≥–∞, –°—Ç—Ä–∞—Ö, –ó–ª–æ—Å—Ç—å, –ì—Ä—É—Å—Ç—å, –°—Ç—ã–¥, –í–∏–Ω–∞, –£–¥–∏–≤–ª–µ–Ω–∏–µ, –í–æ—Å—Ç–æ—Ä–≥, –£—Å—Ç–∞–ª–æ—Å—Ç—å, –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –°–∫—É–∫–∞, –ò–Ω—Ç–µ—Ä–µ—Å, –õ—é–±–æ–≤—å, –ù–µ–∂–Ω–æ—Å—Ç—å, –†–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ, –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –°–æ–º–Ω–µ–Ω–∏–µ, –†–µ–≤–Ω–æ—Å—Ç—å, –°–º–µ–ª–æ—Å—Ç—å, –°–º—É—â–µ–Ω–∏–µ, –û–±–ª–µ–≥—á–µ–Ω–∏–µ, –û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ", 'emotions'),
  ...createWords("–°–≤–æ–±–æ–¥–∞, –í—Ä–µ–º—è, –°–º—ã—Å–ª, –í—ã–±–æ—Ä, –†–∏—Å–∫, –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –î–æ–≤–µ—Ä–∏–µ, –ö–æ–Ω—Ç—Ä–æ–ª—å, –ü–æ—Ä—è–¥–æ–∫, –•–∞–æ—Å, –ü—Ä–∞–≤–∏–ª–æ, –ò–≥—Ä–∞, –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –ö—Ä–∞—Å–æ—Ç–∞, –ì–∞—Ä–º–æ–Ω–∏—è, –°–∏–ª–∞, –≠–Ω–µ—Ä–≥–∏—è, –í–Ω–∏–º–∞–Ω–∏–µ, –ü—Ä–∏–≤—ã—á–∫–∞, –¶–µ–ª—å, –†–µ–∑—É–ª—å—Ç–∞—Ç, –û—à–∏–±–∫–∞, –£—Å–ø–µ—Ö, –ü—Ä–æ–≤–∞–ª", 'abstract'),
  ...createWords("–°–ª—É—à–∞—Ç—å, –ì–æ–≤–æ—Ä–∏—Ç—å, –°–ø–æ—Ä–∏—Ç—å, –î–æ–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å—Å—è, –ü—Ä–æ—Å–∏—Ç—å, –û—Ç–∫–∞–∑—ã–≤–∞—Ç—å, –û–±—ä—è—Å–Ω—è—Ç—å, –£–±–µ–∂–¥–∞—Ç—å, –ü—Ä–æ–¥–∞–≤–∞—Ç—å, –£—á–∏—Ç—å—Å—è, –¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å, –ù–∞—á–∏–Ω–∞—Ç—å, –ó–∞–≤–µ—Ä—à–∞—Ç—å, –ñ–¥–∞—Ç—å, –°–ø–µ—à–∏—Ç—å, –í—ã–±–∏—Ä–∞—Ç—å, –†–∏—Å–∫–æ–≤–∞—Ç—å, –ü—Ä–∞–∑–¥–Ω–æ–≤–∞—Ç—å, –ü—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å, –ò–º–ø—Ä–æ–≤–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –°–æ–∑–¥–∞–≤–∞—Ç—å, –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å, –û—Ç–ø—É—Å–∫–∞—Ç—å, –§–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è, –û—Ç–¥—ã—Ö–∞—Ç—å, –†–∞–±–æ—Ç–∞—Ç—å", 'actions'),
  ...createWords("–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, –ö–∞–º–µ—Ä–∞, –ú–∏–∫—Ä–æ—Ñ–æ–Ω, –°—Ü–µ–Ω–∞, –ü–∞—É–∑–∞, –¢–∏—à–∏–Ω–∞, –í–æ–ø—Ä–æ—Å, –û—Ç–≤–µ—Ç, –®—É—Ç–∫–∞, –ò—Å—Ç–æ—Ä–∏—è, –ê—Ä–≥—É–º–µ–Ω—Ç, –ì–æ–ª–æ—Å, –í–∑–≥–ª—è–¥, –ñ–µ—Å—Ç, –•–∞—Ä–∏–∑–º–∞", 'communication'),
  ...createWords("–ò–Ω—Ç–µ—Ä–Ω–µ—Ç, –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ß–∞—Ç, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –ü–æ–¥–ø–∏—Å–∫–∞, –ê–ª–≥–æ—Ä–∏—Ç–º, –î–∞–Ω–Ω—ã–µ, –ü–∞—Ä–æ–ª—å, –°–µ—Ç—å, –ë–∞—Ç–∞—Ä–µ—è, –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –û—à–∏–±–∫–∞ (–±–∞–≥), –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫, –°—Å—ã–ª–∫–∞, –ü—Ä–æ—Ñ–∏–ª—å, –õ–µ–Ω—Ç–∞", 'tech')
];

// --- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ---

const formatTime = (seconds) => {
  const m = Math.floor(seconds / 60);
  const s = seconds % 60;
  return `${m}:${s < 10 ? '0' : ''}${s}`;
};

const getRandomWord = (category, history, customWords = []) => {
  let pool = WORD_DB;
  
  // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ AI –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É–ª
  if (category === CATEGORIES.AI_CUSTOM.id) {
    pool = customWords;
  } else if (category !== CATEGORIES.ALL.id) {
    pool = WORD_DB.filter(w => w.category === category);
  }
  
  if (!pool || pool.length === 0) return "–ù–µ—Ç —Å–ª–æ–≤";

  const available = pool.filter(w => !history.includes(w.text));
  
  if (available.length === 0) {
    const fallback = pool[Math.floor(Math.random() * pool.length)];
    return fallback ? fallback.text : "–°–ª–æ–≤–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å";
  }

  const randomIndex = Math.floor(Math.random() * available.length);
  return available[randomIndex].text;
};

// --- –ö–û–ú–ü–û–ù–ï–ù–¢–´ ---

export default function App() {
  const [screen, setScreen] = useState('SETTINGS'); 

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  const [totalDuration, setTotalDuration] = useState(180);
  const [wordInterval, setWordInterval] = useState(7);
  const [category, setCategory] = useState(CATEGORIES.ALL.id);
  const [modeId, setModeId] = useState('classic');

  // AI State
  const [customTopic, setCustomTopic] = useState('');
  const [customWords, setCustomWords] = useState([]);
  const [isGeneratingWords, setIsGeneratingWords] = useState(false);
  const [aiHint, setAiHint] = useState(null);
  const [isGeneratingHint, setIsGeneratingHint] = useState(false);

  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
  const [isPlaying, setIsPlaying] = useState(false);
  const [roundTimeLeft, setRoundTimeLeft] = useState(0);
  const [wordTimeLeft, setWordTimeLeft] = useState(0);
  const [currentWord, setCurrentWord] = useState('');
  const [wordsHistory, setWordsHistory] = useState([]);
  const [wordsCount, setWordsCount] = useState(0);

  const tickRate = 100;
  const timerRef = useRef(null);

  const activeMode = GAME_MODES.find(m => m.id === modeId) || GAME_MODES[0];

  // --- –õ–û–ì–ò–ö–ê ---

  const generateCustomWords = async () => {
    if (!customTopic.trim()) {
      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É!");
      return null;
    }
    
    setIsGeneratingWords(true);
    const prompt = `–°–æ–∑–¥–∞–π —Å–ø–∏—Å–æ–∫ –∏–∑ 40 —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ç–µ–º–æ–π "${customTopic}". –°–ª–æ–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ –¥–ª—è –∏–≥—Ä—ã –≤ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û —Å–ª–æ–≤–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—è—Ç—ã–º–∏. –ë–µ–∑ –Ω—É–º–µ—Ä–∞—Ü–∏–∏, –±–µ–∑ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π.`;
    
    const result = await callGemini(prompt);
    setIsGeneratingWords(false);
    
    if (result) {
      const words = result.split(',').map(s => ({ text: s.trim(), category: 'ai_custom' })).filter(w => w.text.length > 1);
      if (words.length < 5) {
        alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é —Ç–µ–º—É.");
        return null;
      }
      setCustomWords(words);
      return words;
    } else {
      alert("–û—à–∏–±–∫–∞ AI. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.");
      return null;
    }
  };

  const startGame = async () => {
    let currentPool = [];

    // AI Generation Check
    if (category === CATEGORIES.AI_CUSTOM.id) {
      const generated = await generateCustomWords();
      if (!generated) return; // Stop if failed
      currentPool = generated;
    }

    setRoundTimeLeft(totalDuration);
    setWordTimeLeft(wordInterval);
    setWordsHistory([]);
    setWordsCount(0);
    setAiHint(null);
    
    // Pass custom pool if needed
    const firstWord = getRandomWord(category, [], category === CATEGORIES.AI_CUSTOM.id ? currentPool : []);
    setCurrentWord(firstWord);
    setWordsHistory([firstWord]);
    
    setIsPlaying(true);
    setScreen('GAME');
  };

  const nextWord = () => {
    const newWord = getRandomWord(category, wordsHistory, customWords);
    setCurrentWord(newWord);
    setWordsHistory(prev => [...prev, newWord]);
    setWordsCount(prev => prev + 1);
    setWordTimeLeft(wordInterval);
    setAiHint(null); // Reset hint
  };

  const stopGame = () => {
    setIsPlaying(false);
    if (timerRef.current) clearInterval(timerRef.current);
    setScreen('RESULTS');
  };

  const getHint = async () => {
    if (isGeneratingHint || aiHint) return;
    setIsGeneratingHint(true);
    const prompt = `–ü—Ä–∏–¥—É–º–∞–π 3 –∫–æ—Ä–æ—Ç–∫–∏–µ, —è—Ä–∫–∏–µ –∏ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –∫ —Å–ª–æ–≤—É "${currentWord}" –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –í–µ—Ä–Ω–∏ —Ç–æ–ª—å–∫–æ —ç—Ç–∏ 3 —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é.`;
    const result = await callGemini(prompt);
    setIsGeneratingHint(false);
    if (result) {
      setAiHint(result);
    }
  };

  useEffect(() => {
    if (screen === 'GAME' && isPlaying) {
      timerRef.current = setInterval(() => {
        setRoundTimeLeft(prev => {
          if (prev <= 0) {
            stopGame();
            return 0;
          }
          return prev - (tickRate / 1000);
        });

        setWordTimeLeft(prev => {
          if (prev <= 0) {
            nextWord();
            return wordInterval;
          }
          return prev - (tickRate / 1000);
        });

      }, tickRate);
    } else {
      clearInterval(timerRef.current);
    }
    return () => clearInterval(timerRef.current);
  }, [screen, isPlaying, wordInterval, category, wordsHistory, customWords]);


  // --- –≠–ö–†–ê–ù–´ ---

  const ScreenSettings = () => (
    <div className="flex flex-col h-full max-w-md mx-auto p-4 animate-fade-in bg-gray-50">
      <div className="text-center mb-6 mt-4">
        <h1 className="text-3xl font-bold text-indigo-600 mb-1 flex items-center justify-center gap-2">
           –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ <Sparkles className="w-5 h-5 text-amber-500" />
        </h1>
        <p className="text-sm text-gray-500">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—É–Ω–¥–∞</p>
      </div>

      <div className="flex-1 space-y-6 overflow-y-auto pb-4 pr-1 scrollbar-hide">
        
        {/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ) */}
        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
          <label className="block text-sm font-bold text-gray-700 mb-3 flex items-center gap-2">
            <Settings className="w-4 h-4 text-indigo-500" /> –°–ª–æ–≤–∞—Ä—å
          </label>
          <div className="flex flex-col gap-1.5">
            {Object.values(CATEGORIES).map(cat => (
              <div key={cat.id}>
                <button
                  onClick={() => setCategory(cat.id)}
                  className={`w-full text-left px-3 py-3 rounded-lg border transition-all flex items-center justify-between text-sm ${
                    category === cat.id 
                    ? 'border-indigo-600 bg-indigo-50 text-indigo-700 font-medium' 
                    : 'border-transparent hover:bg-gray-100 text-gray-600'
                  }`}
                >
                  <span className="flex items-center gap-2">
                    {cat.isAi && <Sparkles className="w-4 h-4 text-amber-500" />}
                    {cat.label}
                  </span>
                  {category === cat.id && <CheckCircle2 className="w-4 h-4 text-indigo-600" />}
                </button>
                
                {/* AI Input Field */}
                {cat.isAi && category === cat.id && (
                  <div className="mt-2 pl-2 pr-2 pb-2 animate-fade-in">
                    <input 
                      type="text" 
                      value={customTopic}
                      onChange={(e) => setCustomTopic(e.target.value)}
                      placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É (–Ω–∞–ø—Ä. –ó–≤–µ–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã)"
                      className="w-full p-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none text-sm"
                    />
                    <p className="text-[10px] text-gray-400 mt-1 ml-1">
                      Gemini —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ
                    </p>
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>

        {/* –í—ã–±–æ—Ä –†–µ–∂–∏–º–∞ */}
        <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
          <label className="block text-sm font-bold text-gray-700 mb-3 flex items-center gap-2">
            <BrainCircuit className="w-4 h-4 text-indigo-500" /> –†–µ–∂–∏–º –∏–≥—Ä—ã
          </label>
          <div className="grid grid-cols-1 gap-2">
            {GAME_MODES.map(mode => {
              const Icon = mode.icon;
              const isSelected = modeId === mode.id;
              return (
                <button
                  key={mode.id}
                  onClick={() => setModeId(mode.id)}
                  className={`relative p-3 rounded-xl text-left border-2 transition-all flex items-start gap-3 ${
                    isSelected 
                    ? 'border-indigo-600 bg-indigo-50' 
                    : 'border-transparent bg-gray-50 hover:bg-gray-100'
                  }`}
                >
                  <div className={`p-2 rounded-lg ${isSelected ? 'bg-indigo-200 text-indigo-700' : 'bg-gray-200 text-gray-500'}`}>
                    <Icon size={20} />
                  </div>
                  <div className="flex-1">
                    <div className="flex items-center gap-2">
                       <span className={`font-bold text-sm ${isSelected ? 'text-indigo-900' : 'text-gray-700'}`}>
                         {mode.label}
                       </span>
                       {mode.isPro && <span className="text-[10px] font-bold px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded-full">PRO</span>}
                    </div>
                    <p className="text-xs text-gray-500 leading-tight mt-1">{mode.desc}</p>
                  </div>
                  {isSelected && <CheckCircle2 className="absolute top-3 right-3 w-5 h-5 text-indigo-600" />}
                </button>
              );
            })}
          </div>
        </div>

        {/* –í—Ä–µ–º—è –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª (Collapsible or smaller) */}
        <div className="grid grid-cols-2 gap-3">
            <div className="bg-white p-3 rounded-2xl shadow-sm border border-gray-100">
              <label className="block text-xs font-bold text-gray-500 mb-2">–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞</label>
              <select 
                value={totalDuration} 
                onChange={(e) => setTotalDuration(Number(e.target.value))}
                className="w-full p-2 bg-gray-100 rounded-lg text-sm font-bold"
              >
                {DURATION_PRESETS.map(t => <option key={t} value={t}>{t >= 60 ? `${t/60} –º–∏–Ω` : `${t} —Å`}</option>)}
              </select>
            </div>
            <div className="bg-white p-3 rounded-2xl shadow-sm border border-gray-100">
              <label className="block text-xs font-bold text-gray-500 mb-2">–°–º–µ–Ω–∞ —Å–ª–æ–≤–∞</label>
               <select 
                value={wordInterval} 
                onChange={(e) => setWordInterval(Number(e.target.value))}
                className="w-full p-2 bg-gray-100 rounded-lg text-sm font-bold"
              >
                {INTERVAL_PRESETS.map(t => <option key={t} value={t}>{t} —Å–µ–∫</option>)}
              </select>
            </div>
        </div>
      </div>

      <button
        onClick={startGame}
        disabled={isGeneratingWords}
        className="w-full bg-indigo-600 hover:bg-indigo-700 disabled:opacity-70 disabled:cursor-wait active:bg-indigo-800 text-white font-bold py-3.5 rounded-xl shadow-lg transition-colors text-lg mt-4 flex items-center justify-center gap-2"
      >
        {isGeneratingWords ? (
          <>
            <Loader2 className="w-5 h-5 animate-spin" /> –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º...
          </>
        ) : (
          "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"
        )}
      </button>
      
       <button
        onClick={() => setScreen('RULES')}
        className="w-full text-gray-500 font-medium py-2 text-sm mt-1"
      >
        –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?
      </button>
    </div>
  );

  const ScreenRules = () => (
    <div className="flex flex-col h-full max-w-md mx-auto p-4 animate-fade-in bg-white">
      <div className="text-center mb-4 mt-2">
        <h2 className="text-2xl font-bold text-gray-800">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
      </div>

      <div className="flex-1 overflow-y-auto space-y-4 pb-4 text-gray-700">
        <div className="bg-indigo-50 p-4 rounded-2xl border border-indigo-100">
          <div className="flex items-center gap-2 mb-2">
            <activeMode.icon className="w-5 h-5 text-indigo-600" />
            <h3 className="font-bold text-indigo-800">–í—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º: {activeMode.label}</h3>
          </div>
          <p className="text-sm font-medium leading-relaxed">
            {activeMode.desc}
          </p>
        </div>

        <div className="bg-gray-50 p-4 rounded-2xl border border-gray-100">
          <h3 className="font-bold text-gray-800 mb-2">–û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
          <ul className="list-disc pl-5 space-y-2 text-sm">
            <li>–ì–æ–≤–æ—Ä–∏ <b>–≤—Å–ª—É—Ö</b> –∏ –±—ã—Å—Ç—Ä–æ.</li>
            <li>–ù–µ –æ—Ü–µ–Ω–∏–≤–∞–π —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã.</li>
            <li>–ï—Å–ª–∏ "–∑–∞–≤–∏—Å" ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥—Å–∫–∞–∑–∫—É AI (–∫–Ω–æ–ø–∫–∞ üí°) –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏ —Å–ª–æ–≤–æ.</li>
          </ul>
        </div>
      </div>

      <div className="flex gap-3 mt-4">
        <button
          onClick={() => setScreen('SETTINGS')}
          className="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold py-3.5 rounded-xl transition-colors"
        >
          –ù–∞–∑–∞–¥
        </button>
      </div>
    </div>
  );

  const ScreenGame = () => {
    const progress = (wordTimeLeft / wordInterval) * 100;
    const isUrgent = wordTimeLeft < 3; 
    const ModeIcon = activeMode.icon;
    const isSpeedMode = modeId === 'speed';

    return (
      <div className="flex flex-col h-full max-w-md mx-auto bg-gray-50">
        {/* Top Bar */}
        <div className="flex justify-between items-center p-4">
          <div className="flex items-center gap-2 bg-white px-3 py-1.5 rounded-full shadow-sm border border-gray-200">
            <Clock className="w-4 h-4 text-gray-400" />
            <span className="font-mono font-bold text-gray-700 text-lg">
              {formatTime(Math.ceil(roundTimeLeft))}
            </span>
          </div>
          <button 
            onClick={stopGame}
            className="p-2 text-red-400 hover:bg-red-50 hover:text-red-600 rounded-full transition-colors"
          >
            <Square className="w-5 h-5 fill-current" />
          </button>
        </div>

        {/* Main Game Area */}
        <div className="flex-1 flex flex-col items-center justify-center p-6 relative">
          
          {/* Background Ring */}
          <div className="absolute inset-0 flex items-center justify-center pointer-events-none opacity-[0.03]">
            <div className="w-72 h-72 rounded-full border-[16px] border-indigo-900"></div>
          </div>

          <div className="text-center z-10 w-full flex flex-col items-center">
            
            {/* Mode Badge */}
            <div className="mb-6 animate-fade-in bg-indigo-100 text-indigo-800 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-sm">
              <ModeIcon size={16} />
              <span className="text-xs font-bold uppercase tracking-wide">{activeMode.label}</span>
            </div>
            
            {/* Instruction Tip */}
            <p className="text-gray-400 text-xs mb-4 max-w-[200px] leading-tight">
               {activeMode.desc}
            </p>

            <div className="mb-8 animate-scale-in min-h-[80px] flex items-center justify-center w-full">
              <h1 className="text-4xl md:text-5xl font-black text-gray-900 break-words leading-tight text-center">
                {currentWord}
              </h1>
            </div>

            {/* AI Hint Display */}
            {aiHint && (
               <div className="mb-6 bg-amber-50 border border-amber-200 text-amber-800 p-3 rounded-xl text-sm animate-fade-in max-w-xs shadow-sm">
                  <div className="flex items-center gap-1 mb-1 text-xs font-bold text-amber-600 uppercase">
                    <Sparkles size={12}/> –ü–æ–¥—Å–∫–∞–∑–∫–∞ Gemini
                  </div>
                  {aiHint}
               </div>
            )}

            {/* Word Timer */}
            <div className="flex flex-col items-center justify-center mt-2">
               <div className="relative w-24 h-24 flex items-center justify-center">
                 <svg className="w-full h-full transform -rotate-90">
                   <circle
                     cx="48" cy="48" r="40"
                     className="stroke-gray-200"
                     strokeWidth="6" fill="transparent"
                   />
                   <circle
                     cx="48" cy="48" r="40"
                     className={`transition-all duration-100 ease-linear ${isUrgent ? 'stroke-red-500' : 'stroke-indigo-500'}`}
                     strokeWidth="6" fill="transparent"
                     strokeDasharray={251.2}
                     strokeDashoffset={251.2 - (251.2 * progress) / 100}
                     strokeLinecap="round"
                   />
                 </svg>
                 <span className={`absolute text-2xl font-bold font-mono ${isUrgent ? 'text-red-600' : 'text-indigo-600'}`}>
                   {Math.ceil(wordTimeLeft)}
                 </span>
               </div>
            </div>
          </div>
        </div>

        {/* Controls */}
        <div className="bg-white p-4 border-t border-gray-200 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] relative z-20">
          {/* Top Control Row: Hint & Pause */}
          <div className="flex justify-between items-center mb-3 max-w-sm mx-auto">
             <button
              onClick={() => setIsPlaying(!isPlaying)}
              className="p-3 rounded-xl bg-gray-100 text-gray-700 font-bold hover:bg-gray-200 transition-colors"
            >
              {isPlaying ? <Pause className="w-5 h-5" /> : <Play className="w-5 h-5" />}
            </button>

            {/* AI Hint Button */}
             <button
              onClick={getHint}
              disabled={!isPlaying || isGeneratingHint || aiHint}
              className={`flex items-center gap-2 px-4 py-3 rounded-xl font-bold text-sm transition-all ${
                aiHint 
                ? 'bg-gray-100 text-gray-400 cursor-default' 
                : 'bg-amber-100 text-amber-700 hover:bg-amber-200 shadow-sm'
              }`}
            >
              {isGeneratingHint ? <Loader2 className="w-4 h-4 animate-spin"/> : <Lightbulb className="w-4 h-4 fill-current"/>}
              {isGeneratingHint ? "–î—É–º–∞—é..." : "–ò–¥–µ—è"}
            </button>
          </div>

          {/* Main Action: Next Word */}
          <div className="max-w-sm mx-auto">
            <button
              onClick={nextWord}
              disabled={!isPlaying}
              className="w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold text-xl shadow-md transition-all active:scale-95"
            >
              –î–∞–ª—å—à–µ <SkipForward className="w-6 h-6" />
            </button>
          </div>
        </div>
        
        {/* Pause Overlay */}
        {!isPlaying && (
          <div className="absolute inset-0 bg-white/90 backdrop-blur-sm z-50 flex items-center justify-center">
            <div className="text-center p-8 bg-white shadow-2xl rounded-3xl border border-gray-100 max-w-xs mx-4 animate-fade-in">
              <h2 className="text-2xl font-bold text-gray-800 mb-2">–ü–∞—É–∑–∞</h2>
              <button 
                onClick={() => setIsPlaying(true)}
                className="w-full bg-indigo-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-indigo-700 transition-transform active:scale-95"
              >
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
              </button>
            </div>
          </div>
        )}
      </div>
    );
  };

  const ScreenResults = () => {
    const timeSpent = totalDuration - Math.max(0, roundTimeLeft);
    
    return (
      <div className="flex flex-col h-full max-w-md mx-auto p-4 animate-fade-in justify-center bg-gray-50">
        <div className="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
          <div className="bg-indigo-600 p-8 text-center text-white relative overflow-hidden">
            <h1 className="text-3xl font-bold mb-2 relative z-10">–†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω</h1>
            <p className="opacity-90 relative z-10 text-indigo-100">–û—Ç–ª–∏—á–Ω–∞—è –º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–º–∏–Ω–∫–∞!</p>
          </div>
          
          <div className="p-6 space-y-5">
            <div className="grid grid-cols-2 gap-4">
              <div className="bg-gray-50 p-4 rounded-2xl text-center">
                 <span className="block text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">–°–ª–æ–≤</span>
                 <span className="block text-3xl font-black text-gray-800">{wordsCount + 1}</span>
              </div>
              <div className="bg-gray-50 p-4 rounded-2xl text-center">
                 <span className="block text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">–í—Ä–µ–º—è</span>
                 <span className="block text-3xl font-black text-gray-800">{formatTime(Math.ceil(timeSpent))}</span>
              </div>
            </div>

            <div className="space-y-3 pt-2">
              <div className="flex justify-between items-center text-sm border-b border-gray-100 pb-2">
                <span className="text-gray-500">–†–µ–∂–∏–º</span>
                <span className="font-bold text-gray-800 flex items-center gap-1">
                  <activeMode.icon size={14} className="text-indigo-500"/> {activeMode.label}
                </span>
              </div>
               <div className="flex justify-between items-center text-sm pb-1">
                 <span className="text-gray-500">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                 <span className="font-bold text-gray-800 truncate max-w-[150px]">
                   {Object.values(CATEGORIES).find(c => c.id === category)?.label}
                   {category === 'ai_custom' && customTopic && ` (${customTopic})`}
                 </span>
              </div>
            </div>
          </div>

          <div className="p-6 bg-gray-50 space-y-3">
            <button
              onClick={startGame}
              className="w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 rounded-xl shadow transition-all active:scale-95"
            >
              <RotateCcw className="w-5 h-5" /> –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–∞—É–Ω–¥
            </button>
            
            <button
              onClick={() => setScreen('SETTINGS')}
              className="w-full flex items-center justify-center gap-2 bg-white border border-gray-200 hover:bg-gray-100 text-gray-700 font-bold py-3.5 rounded-xl transition-colors"
            >
              <Settings className="w-5 h-5" /> –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
          </div>
        </div>
      </div>
    );
  };

  return (
    <div className="h-screen w-full bg-gray-100 font-sans text-gray-900 overflow-hidden selection:bg-indigo-100">
      {screen === 'SETTINGS' && <ScreenSettings />}
      {screen === 'RULES' && <ScreenRules />}
      {screen === 'GAME' && <ScreenGame />}
      {screen === 'RESULTS' && <ScreenResults />}
      
      <style>{`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .animate-scale-in { animation: scaleIn 0.3s ease-out forwards; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
      `}</style>
    </div>
  );
}
